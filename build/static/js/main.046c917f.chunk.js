(window["webpackJsonpe-commerce"]=window["webpackJsonpe-commerce"]||[]).push([[0],{35:function(e,t,a){e.exports=a(69)},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(28),o=a.n(r),l=(a(40),a(12)),u=a(1),i=(a(41),a(8)),s=a(17),m=a(3);var d=function(e,t){var a=c.a.useState((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.error(n),t}})),n=Object(i.a)(a,2),r=n[0],o=n[1];return[r,function(t){try{var a=t instanceof Function?t(r):t;o(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(n){console.error(n)}}]},p={isCartOpen:!1,items:[]},b=Object(n.createContext)(),E=Object(n.createContext)(),f=function(e,t){switch(t.type){case"TOGGLE_CART_POPUP":return Object(m.a)(Object(m.a)({},e),{},{isCartOpen:!e.isCartOpen});case"ADD_TO_CART":var a=t.payload.cartItem.id,n=null;if(e.items.map((function(e){return e.id})).includes(a)){var c=e.items.map((function(e){return e.id===a?Object(m.a)(Object(m.a)({},e),{},{quantity:e.quantity+1}):e}));n=Object(s.a)(c)}else n=[].concat(Object(s.a)(e.items),[t.payload.cartItem]);return Object(m.a)(Object(m.a)({},e),{},{items:n});case"REMOVE_FROM_CART":return Object(m.a)(Object(m.a)({},e),{},{items:e.items.filter((function(e){return e.id!==t.payload.cartItemId}))});case"CLEAR_CART":return Object(m.a)(Object(m.a)({},e),p);default:throw new Error("Unknown action: ".concat(t.type))}},O=function(e){var t=e.children,a=d("cartItems",[]),r=Object(i.a)(a,2),o=r[0],l=r[1],u={isCartOpen:!1,items:o||[]},s=Object(n.useReducer)(f,u),m=Object(i.a)(s,2),p=m[0],O=m[1];return Object(n.useEffect)((function(){l(p.items)}),[JSON.stringify(p.items)]),c.a.createElement(E.Provider,{value:O},c.a.createElement(b.Provider,{value:p},t))},h=(a(42),a(29)),v=a.n(h).a.create({baseURL:"http://localhost:8001/v1"}),g=function(e){return v({method:"GET",url:e})},y=function(e,t){return v({method:"POST",url:e,data:t})},j=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)(null),l=Object(i.a)(o,2),u=l[0],s=l[1],m=Object(n.useContext)(b).items;return a?c.a.createElement("div",null," Your Fancy loader "):c.a.createElement("div",null,"success"===u?c.a.createElement("div",{className:"success"},"Submitted Successfully! ",c.a.createElement("br",null)," you can use payment gateway, email services, etc to charge and notify customer"," "):"error"===u?c.a.createElement("div",{className:"error"}," ","Error while submitting response! ",c.a.createElement("br",null)," you may use azure monitor etc to push redux state for debugging, etc"," "):null,m.length?c.a.createElement("div",null,c.a.createElement("h2",null,"Your cart"),c.a.createElement("table",null,c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",null,"Item Name"),c.a.createElement("th",null,"Quantity"),c.a.createElement("th",null,"Price per unit"))),c.a.createElement("tbody",null,m.map((function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",null,e.name),c.a.createElement("td",null,e.quantity),c.a.createElement("td",null,e.price))})))),c.a.createElement("div",{className:"submit-section"},c.a.createElement("button",{className:"submit-button",type:"submit",onClick:function(){r(!0);var e=m.map((function(e){return{id:e.id,name:e.name,price:e.price}}));y("/products",{customerId:"123456",basket:{basketId:"abcdef",products:e}}).then((function(e){console.log("response",e),r(!1),s("success"),window.localStorage.clear()})).catch((function(e){console.log("error",e),r(!1),s("error")}))}},"Submit"))):c.a.createElement("h2",null," There are No items in your cart!"))},w=a(30),C=a(31),k=a(34),S=a(33),N=(a(61),a(62),function(e){var t=e.product,a=Object(n.useState)(!1),r=Object(i.a)(a,2),o=r[0],l=r[1],u=Object(n.useContext)(E),s=t.basket.products[0];return c.a.createElement("div",{className:"card-container"},c.a.createElement("img",{alt:s.name,src:s.productImage?s.productImage:"https://via.placeholder.com/200"}),c.a.createElement("p",{className:"flex"},s.name," ",s.price),c.a.createElement("button",{className:o?" add-to-cart added":"add-to-cart",type:"button",onClick:function(){var e=Object(m.a)(Object(m.a)({},s),{},{quantity:1});!function(e,t){e({type:"ADD_TO_CART",payload:{cartItem:t}})}(u,e),l(!0),setTimeout((function(){l(!1)}),500)}},o?"\u2714 ADDED":"ADD TO CART"))}),I=function(e){return c.a.createElement("div",null,c.a.createElement("div",{className:"card-list"},e.productList&&e.productList.map((function(e){return c.a.createElement(N,{key:e.id,product:e})}))))},T=(a(63),function(){var e=Object(n.useContext)(b).items;return c.a.createElement(l.b,{to:"/checkout"},c.a.createElement("p",{className:"counter"},"Number of items in cart: ".concat(e.length)),c.a.createElement("img",{alt:"click here to see shopping cart",src:"https://img.icons8.com/material-outlined/100/000000/fast-cart.png"}))}),A=function(e){Object(k.a)(a,e);var t=Object(S.a)(a);function a(){var e;return Object(w.a)(this,a),(e=t.call(this)).getProductDetails=function(){g("/products").then((function(t){console.log("response",t),e.setState({productList:t.data.results}),e.setState({originalProductList:t.data.results})})).catch((function(e){console.log(e)}))},e.state={productList:[],originalProductList:[]},window.localStorage.clear(),e}return Object(C.a)(a,[{key:"componentDidMount",value:function(){this.getProductDetails()}},{key:"render",value:function(){var e=this.state.productList;return c.a.createElement(c.a.Fragment,null,c.a.createElement(T,null),c.a.createElement(I,{productList:e}))}}]),a}(n.Component),D=function(){return c.a.createElement(O,null,c.a.createElement("div",{className:"App"},c.a.createElement(l.a,null,c.a.createElement("header",null,c.a.createElement(l.b,{to:"/"},c.a.createElement("h1",null,"Welcome to my fantastic e-commerce website!!\xa9"))),c.a.createElement(u.c,null,c.a.createElement(u.a,{path:"/",exact:!0},c.a.createElement(A,null)),c.a.createElement(u.a,{path:"/checkout",exact:!0},c.a.createElement(j,null))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(c.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[35,1,2]]]);
//# sourceMappingURL=main.046c917f.chunk.js.map